<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="673.8px" preserveAspectRatio="none" style="width:1182px;height:673px;" version="1.1" viewBox="0 0 1182 673" width="1182px" zoomAndPan="magnify"><defs><filter height="300%" id="fhlmrwktee2wp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2000000476837158"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4000000953674316" dy="2.4000000953674316" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="10.8" lengthAdjust="spacingAndGlyphs" textLength="114.6" x="534.9" y="11.3168">Trackingbot Architecure</text><!--cluster bot--><polygon fill="#FFFFFF" filter="url(#fhlmrwktee2wp)" points="202.8,23.8436,219,23.8436,223.2,38.5219,1168.8,38.5219,1168.8,667.0436,202.8,667.0436,202.8,23.8436" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><line style="stroke: #000000; stroke-width: 0.9000000357627869;" x1="202.8" x2="223.2" y1="38.5219" y2="38.5219"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="12.6" x="205.2" y="33.8455">bot</text><!--cluster commands--><polygon fill="#FFFFFF" filter="url(#fhlmrwktee2wp)" points="207.6,179.8436,253.2,179.8436,257.4,194.5219,795.6,194.5219,795.6,662.2436,207.6,662.2436,207.6,179.8436" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><line style="stroke: #000000; stroke-width: 0.9000000357627869;" x1="207.6" x2="257.4" y1="194.5219" y2="194.5219"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="210" y="189.8455">commands</text><!--cluster services--><polygon fill="#FFFFFF" filter="url(#fhlmrwktee2wp)" points="212.4,197.2436,247.8,197.2436,252,211.9219,442.8,211.9219,442.8,560.8436,212.4,560.8436,212.4,197.2436" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><line style="stroke: #000000; stroke-width: 0.9000000357627869;" x1="212.4" x2="252" y1="211.9219" y2="211.9219"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31.8" x="214.8" y="207.2455">services</text><!--cluster config--><polygon fill="#FFFFFF" filter="url(#fhlmrwktee2wp)" points="8.4,106.0436,36,106.0436,40.2,120.7219,198,120.7219,198,426.4436,8.4,426.4436,8.4,106.0436" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><line style="stroke: #000000; stroke-width: 0.9000000357627869;" x1="8.4" x2="40.2" y1="120.7219" y2="120.7219"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="10.8" y="116.0455">config</text><!--class MessageBot--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="46.2088" id="MessageBot" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="135" x="1028.7" y="210.4436"/><ellipse cx="1074.15" cy="220.0436" fill="#B4A7E5" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M1074.8907,223.6436 L1073.3907,223.6436 L1073.3907,216.3873 L1074.8907,216.3873 L1074.8907,223.6436 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="39" x="1086.45" y="222.8402">MessageBot</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="1029.3" x2="1163.1" y1="229.6436" y2="229.6436"/><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="1029.3" x2="1163.1" y1="234.4436" y2="234.4436"/><ellipse cx="1035.3" cy="242.0958" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="119.4" x="1040.7" y="243.7594">apply(cmds : Vec&lt;MessageCommand&gt;)</text><ellipse cx="1035.3" cy="250.8002" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="58.2" x="1040.7" y="252.4638">start() : JoinHandle</text><!--class TelegramBot--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="37.5044" id="TelegramBot" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="156" x="831.6" y="123.4436"/><ellipse cx="886.35" cy="133.0436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M889.0875,134.2248 Q889.0032,135.3967 888.225,136.0717 Q887.4469,136.7467 886.1719,136.7467 Q884.775,136.7467 883.9782,135.8045 Q883.1813,134.8623 883.1813,133.2311 L883.1813,132.7811 Q883.1813,131.7404 883.5469,130.9436 Q883.9125,130.1467 884.5969,129.7201 Q885.2813,129.2936 886.1907,129.2936 Q887.4469,129.2936 888.2157,129.9639 Q888.9844,130.6342 889.0969,131.8529 L887.6063,131.8529 Q887.55,131.1498 887.2125,130.8357 Q886.875,130.5217 886.1907,130.5217 Q885.4407,130.5217 885.0703,131.0561 Q884.7,131.5904 884.6907,132.7154 L884.6907,133.2592 Q884.6907,134.4404 885.0469,134.9795 Q885.4032,135.5186 886.1719,135.5186 Q886.8657,135.5186 887.2078,135.2045 Q887.55,134.8904 887.5969,134.2248 L889.0875,134.2248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="41.4" x="898.65" y="135.8402">TelegramBot</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="832.2" x2="987" y1="142.6436" y2="142.6436"/><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="836.4" y="148.4958"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="140.4" x="843.6" y="151.9594">commands: Vec&lt;TelegramCommandWrapper&gt;</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="832.2" x2="987" y1="156.148" y2="156.148"/><!--class TelegramCommandWrapper--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="54.9132" id="TelegramCommandWrapper" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="195.6" x="811.8" y="205.9436"/><ellipse cx="860.55" cy="215.5436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M863.2875,216.7248 Q863.2032,217.8967 862.425,218.5717 Q861.6469,219.2467 860.3719,219.2467 Q858.975,219.2467 858.1782,218.3045 Q857.3813,217.3623 857.3813,215.7311 L857.3813,215.2811 Q857.3813,214.2404 857.7469,213.4436 Q858.1125,212.6467 858.7969,212.2201 Q859.4813,211.7936 860.3907,211.7936 Q861.6469,211.7936 862.4157,212.4639 Q863.1844,213.1342 863.2969,214.3529 L861.8063,214.3529 Q861.75,213.6498 861.4125,213.3358 Q861.075,213.0217 860.3907,213.0217 Q859.6407,213.0217 859.2703,213.5561 Q858.9,214.0904 858.8907,215.2154 L858.8907,215.7592 Q858.8907,216.9404 859.2469,217.4795 Q859.6032,218.0186 860.3719,218.0186 Q861.0657,218.0186 861.4078,217.7045 Q861.75,217.3904 861.7969,216.7248 L863.2875,216.7248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="93" x="872.85" y="218.3402">TelegramCommandWrapper</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="812.4" x2="1006.8" y1="225.1436" y2="225.1436"/><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="816.6" y="230.9958"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="75" x="823.8" y="234.4594">cmd: MessageCommand</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="812.4" x2="1006.8" y1="238.648" y2="238.648"/><ellipse cx="818.4" cy="246.3002" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="180" x="823.8" y="247.9638">new(cmd: MessageCommand): TelegramCommandWrapper</text><line style="stroke: #000000; stroke-width: 1.0;" x1="823.8" x2="1003.8" y1="249.1638" y2="249.1638"/><ellipse cx="818.4" cy="255.0046" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="142.2" x="823.8" y="256.6682">execute(bot: Bot, update: Update, args: String[]&gt;</text><!--class BotBuilder--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="46.2088" id="BotBuilder" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="181.8" x="610.5" y="41.2436"/><ellipse cx="682.35" cy="50.8436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M685.0875,52.0248 Q685.0032,53.1967 684.225,53.8717 Q683.4469,54.5467 682.1719,54.5467 Q680.775,54.5467 679.9782,53.6045 Q679.1813,52.6623 679.1813,51.0311 L679.1813,50.5811 Q679.1813,49.5404 679.5469,48.7436 Q679.9125,47.9467 680.5969,47.5201 Q681.2813,47.0936 682.1907,47.0936 Q683.4469,47.0936 684.2157,47.7639 Q684.9844,48.4342 685.0969,49.6529 L683.6063,49.6529 Q683.55,48.9498 683.2125,48.6357 Q682.875,48.3217 682.1907,48.3217 Q681.4407,48.3217 681.0703,48.8561 Q680.7,49.3904 680.6907,50.5154 L680.6907,51.0592 Q680.6907,52.2404 681.0469,52.7795 Q681.4032,53.3186 682.1719,53.3186 Q682.8657,53.3186 683.2078,53.0045 Q683.55,52.6904 683.5969,52.0248 L685.0875,52.0248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="33" x="694.65" y="53.6402">BotBuilder</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="611.1" x2="791.7" y1="60.4436" y2="60.4436"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="611.1" x2="791.7" y1="65.2436" y2="65.2436"/><ellipse cx="617.1" cy="72.8958" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="53.4" x="622.5" y="74.5594">new() : BotBuilder</text><line style="stroke: #000000; stroke-width: 1.0;" x1="622.5" x2="675.9" y1="75.7594" y2="75.7594"/><ellipse cx="617.1" cy="81.6001" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="166.2" x="622.5" y="83.2638">build(config : AppConfig, type : BotType) : MessageBot&gt;</text><line style="stroke: #000000; stroke-width: 1.0;" x1="622.5" x2="788.7" y1="84.4638" y2="84.4638"/><!--class BotType--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="37.5044" id="BotType" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="45.6" x="700.8" y="123.4436"/><ellipse cx="709.8" cy="133.0436" fill="#EB937F" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M711.8063,133.5029 L708.9375,133.5029 L708.9375,135.4436 L712.3125,135.4436 L712.3125,136.6436 L707.4469,136.6436 L707.4469,129.3873 L712.3032,129.3873 L712.3032,130.6061 L708.9375,130.6061 L708.9375,132.3311 L711.8063,132.3311 L711.8063,133.5029 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="26.4" x="718.2" y="135.8402">BotType</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="701.4" x2="745.8" y1="142.6436" y2="142.6436"/><ellipse cx="707.4" cy="150.2958" fill="none" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="28.8" x="712.8" y="151.9594">Telegram</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="701.4" x2="745.8" y1="156.148" y2="156.148"/><!--class MessageCommand--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="63.6176" id="MessageCommand" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="250.2" x="536.7" y="331.9436"/><ellipse cx="628.95" cy="341.5436" fill="#B4A7E5" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M629.6907,345.1436 L628.1906,345.1436 L628.1906,337.8873 L629.6907,337.8873 L629.6907,345.1436 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60.6" x="641.25" y="344.3402">MessageCommand</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="537.3" x2="786.3" y1="351.1436" y2="351.1436"/><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="537.3" x2="786.3" y1="355.9436" y2="355.9436"/><ellipse cx="543.3" cy="363.5958" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="217.8" x="548.7" y="365.2594">exec_cmd(args: Vec&lt;String&gt;, chat: Chat) : Result&lt;String,CommandError&gt;</text><ellipse cx="543.3" cy="372.3002" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="234.6" x="548.7" y="373.9638">exec_cmd_mut(args: Vec&lt;String&gt;&gt;,chat: Chat) : Result&lt;String,CommandError&gt;</text><ellipse cx="543.3" cy="381.0046" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="67.8" x="548.7" y="382.6682">type() : CommandType</text><ellipse cx="543.3" cy="389.709" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="52.2" x="548.7" y="391.3726">need_mut() : bool</text><!--class TrackingStateCommand--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="37.5044" id="TrackingStateCommand" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="99" x="447.9" y="214.6436"/><ellipse cx="456.9" cy="224.2436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M459.6375,225.4248 Q459.5531,226.5967 458.775,227.2717 Q457.9969,227.9467 456.7219,227.9467 Q455.325,227.9467 454.5281,227.0045 Q453.7313,226.0623 453.7313,224.4311 L453.7313,223.9811 Q453.7313,222.9404 454.0969,222.1436 Q454.4625,221.3467 455.1469,220.9201 Q455.8313,220.4936 456.7406,220.4936 Q457.9969,220.4936 458.7656,221.1639 Q459.5344,221.8342 459.6469,223.0529 L458.1563,223.0529 Q458.1,222.3498 457.7625,222.0358 Q457.425,221.7217 456.7406,221.7217 Q455.9906,221.7217 455.6203,222.2561 Q455.25,222.7904 455.2406,223.9154 L455.2406,224.4592 Q455.2406,225.6404 455.5969,226.1795 Q455.9531,226.7186 456.7219,226.7186 Q457.4156,226.7186 457.7578,226.4045 Q458.1,226.0904 458.1469,225.4248 L459.6375,225.4248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="79.8" x="465.3" y="227.0402">TrackingStateCommand</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="448.5" x2="546.3" y1="233.8436" y2="233.8436"/><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="452.7" y="239.6958"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="79.2" x="459.9" y="243.1594">dao: TrackingStateService</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="448.5" x2="546.3" y1="247.348" y2="247.348"/><!--class CommandType--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="46.2088" id="CommandType" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="69.6" x="721.2" y="483.7436"/><ellipse cx="730.2" cy="493.3436" fill="#EB937F" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M732.2063,493.8029 L729.3375,493.8029 L729.3375,495.7436 L732.7125,495.7436 L732.7125,496.9436 L727.8469,496.9436 L727.8469,489.6873 L732.7032,489.6873 L732.7032,490.9061 L729.3375,490.9061 L729.3375,492.6311 L732.2063,492.6311 L732.2063,493.8029 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="50.4" x="738.6" y="496.1403">CommandType</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="721.8" x2="790.2" y1="502.9436" y2="502.9436"/><ellipse cx="727.8" cy="510.5958" fill="none" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="49.2" x="733.2" y="512.2594">SingleCommand</text><ellipse cx="727.8" cy="519.3002" fill="none" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="44.4" x="733.2" y="520.9638">ChatCommand</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="721.8" x2="790.2" y1="525.1524" y2="525.1524"/><!--class MessageCommandFactory--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="37.5044" id="MessageCommandFactory" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="222.6" x="567.9" y="214.6436"/><ellipse cx="632.55" cy="224.2436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M635.2875,225.4248 Q635.2032,226.5967 634.425,227.2717 Q633.6469,227.9467 632.3719,227.9467 Q630.975,227.9467 630.1782,227.0045 Q629.3813,226.0623 629.3813,224.4311 L629.3813,223.9811 Q629.3813,222.9404 629.7469,222.1436 Q630.1125,221.3467 630.7969,220.9201 Q631.4813,220.4936 632.3907,220.4936 Q633.6469,220.4936 634.4157,221.1639 Q635.1844,221.8342 635.2969,223.0529 L633.8063,223.0529 Q633.75,222.3498 633.4125,222.0358 Q633.075,221.7217 632.3907,221.7217 Q631.6407,221.7217 631.2703,222.2561 Q630.9,222.7904 630.8907,223.9154 L630.8907,224.4592 Q630.8907,225.6404 631.2469,226.1795 Q631.6032,226.7186 632.3719,226.7186 Q633.0657,226.7186 633.4078,226.4045 Q633.75,226.0904 633.7969,225.4248 L635.2875,225.4248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="644.85" y="227.0402">MessageCommandFactory</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="568.5" x2="789.9" y1="233.8436" y2="233.8436"/><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="568.5" x2="789.9" y1="238.6436" y2="238.6436"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="215.4" x="571.5" y="247.9594">{static } + build(config: &amp;ApplicationConfig) -&gt; Vec&lt;MessageCommand&gt;</text><!--class Chat--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="28.8" id="Chat" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="34.8" x="560.4" y="492.4436"/><ellipse cx="569.4" cy="502.0436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M572.1375,503.2248 Q572.0531,504.3967 571.275,505.0717 Q570.4969,505.7467 569.2219,505.7467 Q567.825,505.7467 567.0281,504.8045 Q566.2313,503.8623 566.2313,502.2311 L566.2313,501.7811 Q566.2313,500.7404 566.5969,499.9436 Q566.9625,499.1467 567.6469,498.7201 Q568.3313,498.2936 569.2406,498.2936 Q570.4969,498.2936 571.2656,498.9639 Q572.0344,499.6342 572.1469,500.8529 L570.6563,500.8529 Q570.6,500.1498 570.2625,499.8358 Q569.925,499.5217 569.2406,499.5217 Q568.4906,499.5217 568.1203,500.0561 Q567.75,500.5904 567.7406,501.7154 L567.7406,502.2592 Q567.7406,503.4404 568.0969,503.9795 Q568.4531,504.5186 569.2219,504.5186 Q569.9156,504.5186 570.2578,504.2045 Q570.6,503.8904 570.6469,503.2248 L572.1375,503.2248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="15.6" x="577.8" y="504.8403">Chat</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="561" x2="594.6" y1="511.6436" y2="511.6436"/><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="561" x2="594.6" y1="516.4436" y2="516.4436"/><!--class Message--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="28.8" id="Message" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="48" x="553.8" y="628.6436"/><ellipse cx="562.8" cy="638.2436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M565.5375,639.4248 Q565.4531,640.5967 564.675,641.2717 Q563.8969,641.9467 562.6219,641.9467 Q561.225,641.9467 560.4281,641.0045 Q559.6313,640.0623 559.6313,638.4311 L559.6313,637.9811 Q559.6313,636.9405 559.9969,636.1436 Q560.3625,635.3467 561.0469,634.9201 Q561.7313,634.4936 562.6406,634.4936 Q563.8969,634.4936 564.6656,635.1639 Q565.4344,635.8342 565.5469,637.053 L564.0563,637.053 Q564,636.3498 563.6625,636.0358 Q563.325,635.7217 562.6406,635.7217 Q561.8906,635.7217 561.5203,636.2561 Q561.15,636.7905 561.1406,637.9155 L561.1406,638.4592 Q561.1406,639.6405 561.4969,640.1795 Q561.8531,640.7186 562.6219,640.7186 Q563.3156,640.7186 563.6578,640.4045 Q564,640.0905 564.0469,639.4248 L565.5375,639.4248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="28.8" x="571.2" y="641.0403">Message</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="554.4" x2="601.2" y1="647.8436" y2="647.8436"/><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="554.4" x2="601.2" y1="652.6436" y2="652.6436"/><!--class CommandError--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="63.6176" id="CommandError" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="83.4" x="616.5" y="475.0436"/><ellipse cx="631.71" cy="484.6436" fill="#EB937F" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M633.7163,485.1029 L630.8475,485.1029 L630.8475,487.0436 L634.2225,487.0436 L634.2225,488.2436 L629.3569,488.2436 L629.3569,480.9873 L634.2132,480.9873 L634.2132,482.2061 L630.8475,482.2061 L630.8475,483.9311 L633.7163,483.9311 L633.7163,485.1029 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="50.4" x="641.49" y="487.4403">CommandError</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="617.1" x2="699.3" y1="494.2436" y2="494.2436"/><ellipse cx="623.1" cy="501.8958" fill="none" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="51" x="628.5" y="503.5594">IllegalArguments</text><ellipse cx="623.1" cy="510.6002" fill="none" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="41.4" x="628.5" y="512.2638">NoArguments</text><ellipse cx="623.1" cy="519.3046" fill="none" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="67.8" x="628.5" y="520.9682">InternalCommandError</text><ellipse cx="623.1" cy="528.009" fill="none" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="21" x="628.5" y="529.6726">IOError</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="617.1" x2="699.3" y1="533.8612" y2="533.8612"/><!--class TrackingStateService--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="37.5044" id="TrackingStateService" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="220.2" x="217.5" y="344.8436"/><ellipse cx="292.05" cy="354.4436" fill="#B4A7E5" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M292.7906,358.0436 L291.2906,358.0436 L291.2906,350.7873 L292.7906,350.7873 L292.7906,358.0436 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="66" x="304.35" y="357.2402">TrackingStateService</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="218.1" x2="437.1" y1="364.0436" y2="364.0436"/><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="218.1" x2="437.1" y1="368.8436" y2="368.8436"/><ellipse cx="224.1" cy="376.4958" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="204.6" x="229.5" y="378.1594">state(tracking_code: String) -&gt; Result&lt;Option&lt;TrackingState&gt;,Error&gt;</text><!--class TrackingStateServiceImpl--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="37.5044" id="TrackingStateServiceImpl" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="168" x="243.6" y="214.6436"/><ellipse cx="283.95" cy="224.2436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M286.6875,225.4248 Q286.6031,226.5967 285.825,227.2717 Q285.0469,227.9467 283.7719,227.9467 Q282.375,227.9467 281.5781,227.0045 Q280.7813,226.0623 280.7813,224.4311 L280.7813,223.9811 Q280.7813,222.9404 281.1469,222.1436 Q281.5125,221.3467 282.1969,220.9201 Q282.8813,220.4936 283.7906,220.4936 Q285.0469,220.4936 285.8156,221.1639 Q286.5844,221.8342 286.6969,223.0529 L285.2063,223.0529 Q285.15,222.3498 284.8125,222.0358 Q284.475,221.7217 283.7906,221.7217 Q283.0406,221.7217 282.6703,222.2561 Q282.3,222.7904 282.2906,223.9154 L282.2906,224.4592 Q282.2906,225.6404 282.6469,226.1795 Q283.0031,226.7186 283.7719,226.7186 Q284.4656,226.7186 284.8078,226.4045 Q285.15,226.0904 285.1969,225.4248 L286.6875,225.4248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="82.2" x="296.25" y="227.0402">TrackingStateServiceImpl</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="244.2" x2="411" y1="233.8436" y2="233.8436"/><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="244.2" x2="411" y1="238.6436" y2="238.6436"/><ellipse cx="250.2" cy="246.2958" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="152.4" x="255.6" y="247.9594">TrackingStateServiceImpl(config: DatabaseConfig)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="255.6" x2="408" y1="249.1594" y2="249.1594"/><!--class TrackingState--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="98.4352" id="TrackingState" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="91.8" x="281.7" y="457.6436"/><ellipse cx="303.12" cy="467.2436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M305.8575,468.4248 Q305.7731,469.5967 304.995,470.2717 Q304.2169,470.9467 302.9419,470.9467 Q301.545,470.9467 300.7481,470.0045 Q299.9513,469.0623 299.9513,467.4311 L299.9513,466.9811 Q299.9513,465.9404 300.3169,465.1436 Q300.6825,464.3467 301.3669,463.9201 Q302.0513,463.4936 302.9606,463.4936 Q304.2169,463.4936 304.9856,464.1639 Q305.7544,464.8342 305.8669,466.0529 L304.3763,466.0529 Q304.32,465.3498 303.9825,465.0358 Q303.645,464.7217 302.9606,464.7217 Q302.2106,464.7217 301.8403,465.2561 Q301.47,465.7904 301.4606,466.9154 L301.4606,467.4592 Q301.4606,468.6404 301.8169,469.1795 Q302.1731,469.7186 302.9419,469.7186 Q303.6356,469.7186 303.9778,469.4045 Q304.32,469.0904 304.3669,468.4248 L305.8575,468.4248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="45" x="314.28" y="470.0403">TrackingState</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="282.3" x2="372.9" y1="476.8436" y2="476.8436"/><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="286.5" y="482.6958"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="49.2" x="293.7" y="486.1594">access_key: u64</text><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="286.5" y="491.4002"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="71.4" x="293.7" y="494.8638">delivery_address: String</text><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="286.5" y="500.1046"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="57.6" x="293.7" y="503.5682">delivered_to: String</text><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="286.5" y="508.809"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="55.8" x="293.7" y="512.2726">order_state: String</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="282.3" x2="372.9" y1="516.4612" y2="516.4612"/><ellipse cx="288.3" cy="524.1134" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="29.4" x="293.7" y="525.777">key(): u64</text><ellipse cx="288.3" cy="532.8177" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="76.2" x="293.7" y="534.4814">delivery_address(): String</text><ellipse cx="288.3" cy="541.5221" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="62.4" x="293.7" y="543.1858">delivered_to(): String</text><ellipse cx="288.3" cy="550.2265" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="42" x="293.7" y="551.8902">state(): String</text><!--class AppConfig--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="72.322" id="AppConfig" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="180" x="13.2" y="197.2436"/><ellipse cx="83.25" cy="206.8436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M85.9875,208.0248 Q85.9031,209.1967 85.125,209.8717 Q84.3469,210.5467 83.0719,210.5467 Q81.675,210.5467 80.8781,209.6045 Q80.0813,208.6623 80.0813,207.0311 L80.0813,206.5811 Q80.0813,205.5404 80.4469,204.7436 Q80.8125,203.9467 81.4969,203.5201 Q82.1813,203.0936 83.0906,203.0936 Q84.3469,203.0936 85.1156,203.7639 Q85.8844,204.4342 85.9969,205.6529 L84.5063,205.6529 Q84.45,204.9498 84.1125,204.6358 Q83.775,204.3217 83.0906,204.3217 Q82.3406,204.3217 81.9703,204.8561 Q81.6,205.3904 81.5906,206.5154 L81.5906,207.0592 Q81.5906,208.2404 81.9469,208.7795 Q82.3031,209.3186 83.0719,209.3186 Q83.7656,209.3186 84.1078,209.0045 Q84.45,208.6904 84.4969,208.0248 L85.9875,208.0248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="34.8" x="95.55" y="209.6402">AppConfig</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="13.8" x2="192.6" y1="216.4436" y2="216.4436"/><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="18" y="222.2958"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="70.8" x="25.2" y="225.7594">telegram_apikey: String</text><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="18" y="231.0002"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="97.8" x="25.2" y="234.4638">databaseConfig: DatabaseConfig</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="13.8" x2="192.6" y1="238.6524" y2="238.6524"/><ellipse cx="19.8" cy="246.3046" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="164.4" x="25.2" y="247.9682">new(apikey: String, config: DatabaseConfig): AppConfig</text><ellipse cx="19.8" cy="255.0089" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="75.6" x="25.2" y="256.6726">telegram_apikey(): String</text><ellipse cx="19.8" cy="263.7133" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="102.6" x="25.2" y="265.377">databaseConfig(): DatabaseConfig</text><!--class DatabaseConfig--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="115.8439" id="DatabaseConfig" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="72" x="94.2" y="305.8436"/><ellipse cx="103.2" cy="315.4436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M105.9375,316.6248 Q105.8531,317.7967 105.075,318.4717 Q104.2969,319.1467 103.0219,319.1467 Q101.625,319.1467 100.8281,318.2045 Q100.0313,317.2623 100.0313,315.6311 L100.0313,315.1811 Q100.0313,314.1404 100.3969,313.3436 Q100.7625,312.5467 101.4469,312.1201 Q102.1313,311.6936 103.0406,311.6936 Q104.2969,311.6936 105.0656,312.3639 Q105.8344,313.0342 105.9469,314.2529 L104.4563,314.2529 Q104.4,313.5498 104.0625,313.2358 Q103.725,312.9217 103.0406,312.9217 Q102.2906,312.9217 101.9203,313.4561 Q101.55,313.9904 101.5406,315.1154 L101.5406,315.6592 Q101.5406,316.8404 101.8969,317.3795 Q102.2531,317.9186 103.0219,317.9186 Q103.7156,317.9186 104.0578,317.6045 Q104.4,317.2904 104.4469,316.6248 L105.9375,316.6248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="111.6" y="318.2402">DatabaseConfig</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="94.8" x2="165.6" y1="325.0436" y2="325.0436"/><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="99" y="330.8958"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="26.4" x="106.2" y="334.3594">port: u16</text><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="99" y="339.6002"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="34.8" x="106.2" y="343.0638">host: String</text><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="99" y="348.3046"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="34.8" x="106.2" y="351.7682">user: String</text><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="99" y="357.0089"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="50.4" x="106.2" y="360.4726">password: String</text><rect fill="none" height="3.6" style="stroke: #C82930; stroke-width: 0.6000000238418579;" width="3.6" x="99" y="365.7133"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="49.2" x="106.2" y="369.177">database: String</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="94.8" x2="165.6" y1="373.3655" y2="373.3655"/><ellipse cx="100.8" cy="381.0177" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="31.2" x="106.2" y="382.6814">port(): u16</text><ellipse cx="100.8" cy="389.7221" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="39.6" x="106.2" y="391.3858">host(): String</text><ellipse cx="100.8" cy="398.4265" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="39.6" x="106.2" y="400.0902">user(): String</text><ellipse cx="100.8" cy="407.1309" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="55.2" x="106.2" y="408.7945">password(): String</text><ellipse cx="100.8" cy="415.8353" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" textLength="54" x="106.2" y="417.4989">database(): String</text><!--class ConfigLoader--><rect fill="#FEFECE" filter="url(#fhlmrwktee2wp)" height="37.5044" id="ConfigLoader" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="111" x="47.7" y="123.4436"/><ellipse cx="78.75" cy="133.0436" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M81.4875,134.2248 Q81.4031,135.3967 80.625,136.0717 Q79.8469,136.7467 78.5719,136.7467 Q77.175,136.7467 76.3781,135.8045 Q75.5813,134.8623 75.5813,133.2311 L75.5813,132.7811 Q75.5813,131.7404 75.9469,130.9436 Q76.3125,130.1467 76.9969,129.7201 Q77.6813,129.2936 78.5906,129.2936 Q79.8469,129.2936 80.6156,129.9639 Q81.3844,130.6342 81.4969,131.8529 L80.0063,131.8529 Q79.95,131.1498 79.6125,130.8357 Q79.275,130.5217 78.5906,130.5217 Q77.8406,130.5217 77.4703,131.0561 Q77.1,131.5904 77.0906,132.7154 L77.0906,133.2592 Q77.0906,134.4404 77.4469,134.9795 Q77.8031,135.5186 78.5719,135.5186 Q79.2656,135.5186 79.6078,135.2045 Q79.95,134.8904 79.9969,134.2248 L81.4875,134.2248 Z "/><text fill="#000000" font-family="sans-serif" font-size="7.2" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="91.05" y="135.8402">ConfigLoader</text><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="48.3" x2="158.1" y1="142.6436" y2="142.6436"/><line style="stroke: #A80036; stroke-width: 0.9000000357627869;" x1="48.3" x2="158.1" y1="147.4436" y2="147.4436"/><ellipse cx="54.3" cy="155.0958" fill="#84BE84" rx="1.8" ry="1.8" style="stroke: #038048; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="6.6" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="95.4" x="59.7" y="156.7594">load() : Result&lt;AppConfig,Error&gt;</text><line style="stroke: #000000; stroke-width: 1.0;" x1="59.7" x2="155.1" y1="157.9594" y2="157.9594"/><!--link BotBuilder to BotType--><path d="M708.0006,87.5349 C710.9427,97.8719 714.3924,109.9925 717.2986,120.2035 " fill="none" id="BotBuilder-BotType" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="718.182,123.3071,719.0121,117.4563,717.3607,120.4217,714.3954,118.7703,718.182,123.3071" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link BotBuilder to AppConfig--><path d="M610.3944,77.0047 C563.6197,84.2 505.8634,94.1511 454.8,106.0436 C343.1302,132.051 313.9683,137.0379 207.6,179.8436 C196.0082,184.5084 183.9812,190.0186 172.3923,195.7017 " fill="none" id="BotBuilder-AppConfig" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="169.4559,197.1499,175.3605,196.9137,172.1465,195.8229,173.2373,192.6088,169.4559,197.1499" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link BotBuilder to MessageBot--><path d="M792.4324,69.5832 C866.568,75.217 964.3292,86.1732 998.4,106.0436 C1039.0212,129.7341 1068.5501,177.5046 1083.9825,207.3733 " fill="none" id="BotBuilder-MessageBot" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="1085.4319,210.2066,1085.1092,204.3061,1084.0656,207.5358,1080.8359,206.4922,1085.4319,210.2066" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link BotBuilder to TrackingStateServiceImpl--><path d="M634.3227,87.5354 C575.1334,108.8789 487.1468,142.7692 414,179.8436 C394.7103,189.6206 374.1066,202.3304 357.8591,212.9306 " fill="none" id="BotBuilder-TrackingStateServiceImpl" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="355.2897,214.613,361.1221,213.6626,357.7995,212.9695,358.4926,209.6469,355.2897,214.613" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link BotBuilder to MessageCommandFactory--><path d="M694.6632,87.5746 C693.1291,93.551 691.6453,100.001 690.6,106.0436 C684.2476,142.7637 681.3259,186.0824 680.0661,211.6009 " fill="none" id="BotBuilder-MessageCommandFactory" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="679.9206,214.623,682.5777,209.3448,680.065,211.6265,677.7832,209.1138,679.9206,214.623" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link BotBuilder to TelegramBot--><path d="M763.3032,87.5349 C792.8543,98.606 827.8663,111.7229 856.2288,122.3486 " fill="none" id="BotBuilder-TelegramBot" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="859.127,123.4343,854.9121,119.2924,856.3176,122.3819,853.2282,123.7873,859.127,123.4343" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link MessageCommandFactory to MessageCommand--><path d="M676.6699,252.4758 C674.0089,272.3877 669.7612,304.172 666.4858,328.6812 " fill="none" id="MessageCommandFactory-MessageCommand" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="666.0507,331.9367,669.145,326.9022,666.4482,328.9631,664.3873,326.2663,666.0507,331.9367" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link Chat to Message--><path d="M577.8,521.4194 C577.8,545.2276 577.8,592.6142 577.8,620.6941 " fill="none" id="Chat-Message" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="577.8,628.5726,580.2,624.9726,577.8,621.3726,575.4,624.9726,577.8,628.5726" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link TelegramBot to MessageBot--><path d="M973.6707,161.2465 C988.6072,166.5281 1004.2236,172.7842 1018.2,179.8436 C1031.3186,186.4697 1044.7865,195.0162 1056.76,203.334 " fill="none" id="TelegramBot-MessageBot" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="none" points="1059.3038,199.9895,1066.6377,210.3747,1054.4282,206.8296,1059.3038,199.9895" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link TelegramBot to TelegramCommandWrapper--><path d="M909.6,161.4621 C909.6,173.4077 909.6,189.0637 909.6,202.7319 " fill="none" id="TelegramBot-TelegramCommandWrapper" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="909.6,205.7965,912,200.3965,909.6,202.7965,907.2,200.3965,909.6,205.7965" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link MessageCommand to Chat--><path d="M642.6925,395.6141 C631.8589,413.755 618.0922,436.9258 606,457.6436 C599.8384,468.2005 593.0204,480.0899 587.632,489.5362 " fill="none" id="MessageCommand-Chat" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="586.008,492.3852,590.7672,488.8824,587.4936,489.7789,586.5971,486.5053,586.008,492.3852" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link MessageCommand to CommandType--><path d="M682.8231,395.6799 C699.7741,421.4304 723.3054,457.1768 739.0623,481.1134 " fill="none" id="MessageCommand-CommandType" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="740.7531,483.6818,739.7885,477.8518,739.1036,481.1761,735.7793,480.4911,740.7531,483.6818" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link MessageCommand to CommandError--><path d="M660.9966,395.6799 C660.4274,418.3051 659.6641,448.647 659.0787,471.9149 " fill="none" id="MessageCommand-CommandError" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="659.001,475.0049,661.5362,469.667,659.0765,472.0058,656.7377,469.5462,659.001,475.0049" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link TrackingStateService to TrackingState--><path d="M327.6,382.7462 C327.6,401.0105 327.6,429.4561 327.6,454.5077 " fill="none" id="TrackingStateService-TrackingState" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="327.6,457.5451,330,452.1451,327.6,454.5451,325.2,452.1451,327.6,457.5451" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link TrackingStateServiceImpl to TrackingStateService--><path d="M327.6,252.4758 C327.6,273.4966 327.6,307.749 327.6,332.7049 " fill="none" id="TrackingStateServiceImpl-TrackingStateService" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="none" points="331.8001,332.7885,327.6,344.7885,323.4001,332.7885,331.8001,332.7885" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link TrackingStateServiceImpl to DatabaseConfig--><path d="M294.1938,252.4656 C269.8048,266.5687 236.1546,286.6311 207.6,305.8436 C196.0237,313.6325 183.8025,322.4695 172.5764,330.8522 " fill="none" id="TrackingStateServiceImpl-DatabaseConfig" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="166.274,335.5879,170.5938,335.344,172.0301,331.2627,167.7103,331.5066,166.274,335.5879" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link TrackingStateCommand to MessageCommand--><path d="M521.3052,252.4758 C545.0107,271.2499 582.043,300.5783 612.137,324.4119 " fill="none" id="TrackingStateCommand-MessageCommand" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="none" points="614.8387,321.194,621.6383,331.9367,609.6235,327.779,614.8387,321.194" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link TrackingStateCommand to TrackingStateService--><path d="M472.7097,252.4758 C441.3342,276.534 387.3556,317.9239 354.8187,342.8727 " fill="none" id="TrackingStateCommand-TrackingStateService" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="352.3202,344.7885,358.0658,343.4073,354.7009,342.9631,355.1451,339.5982,352.3202,344.7885" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link MessageBot to MessageCommand--><path d="M1049.955,256.71 C1039.6461,261.4094 1028.6659,266.0636 1018.2,269.8436 C944.0009,296.6423 858.6056,319.4079 790.0088,335.8092 " fill="none" id="MessageBot-MessageCommand" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="786.9606,336.5364,792.7702,337.6176,789.8787,335.8402,791.6562,332.9487,786.9606,336.5364" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link AppConfig to DatabaseConfig--><path d="M110.7569,269.9846 C112.8674,280.1619 115.22,291.5066 117.5394,302.6913 " fill="none" id="AppConfig-DatabaseConfig" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="118.1925,305.8407,119.446,300.0658,117.5833,302.9032,114.746,301.0405,118.1925,305.8407" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--link ConfigLoader to AppConfig--><path d="M103.2,161.4621 C103.2,170.9153 103.2,182.692 103.2,193.9685 " fill="none" id="ConfigLoader-AppConfig" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><polygon fill="#A80036" points="103.2,197.1334,105.6,191.7334,103.2,194.1334,100.8,191.7334,103.2,197.1334" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><!--
@startuml

title Trackingbot Architecure

package bot{
    interface MessageBot{
        + apply(cmds : Vec<MessageCommand>)
        + start() : JoinHandle
    }
    class TelegramBot{
        - commands: Vec<TelegramCommandWrapper>
    }

    class TelegramCommandWrapper{
        - cmd: MessageCommand
        - -
        {static} + new(cmd: MessageCommand): TelegramCommandWrapper
        + execute(bot: Bot, update: Update, args: String[]>
    }
    
    class BotBuilder{
        - -
        {static} + new() : BotBuilder
        {static} + build(config : AppConfig, type : BotType) : MessageBot>
    }
    
    enum BotType{
        + Telegram
    }
    
    package commands{
        interface MessageCommand{
            + exec_cmd(args: Vec<String>, chat: Chat) : Result<String,CommandError>
            + exec_cmd_mut(args: Vec<String>>,chat: Chat) : Result<String,CommandError>
            + type() : CommandType
            + need_mut() : bool
        }
        class TrackingStateCommand{
            - dao: TrackingStateService
        }
        enum CommandType{
            + SingleCommand
            + ChatCommand
        }

        class MessageCommandFactory{
            {static } + build(config: &ApplicationConfig) -> Vec<MessageCommand>
        }

        package services{



            interface TrackingStateService{
                + state(tracking_code: String) -> Result<Option<TrackingState>,Error>
            }

            class TrackingStateServiceImpl{
                {static} + TrackingStateServiceImpl(config: DatabaseConfig)
            }

            class TrackingState{
                - access_key: u64
                - delivery_address: String
                - delivered_to: String
                - order_state: String
                - -
                + key(): u64
                + delivery_address(): String
                + delivered_to(): String
                + state(): String
            }
        }

        class Chat
        class Message

        enum CommandError{
            + IllegalArguments
            + NoArguments
            + InternalCommandError
            + IOError
        }
    }
}

    package config{
        class AppConfig{
            - telegram_apikey: String
            - databaseConfig: DatabaseConfig
            - -
            + new(apikey: String, config: DatabaseConfig): AppConfig
            + telegram_apikey(): String
            + databaseConfig(): DatabaseConfig
        }
        class DatabaseConfig{
            - port: u16
            - host: String
            - user: String
            - password: String
            - database: String
            - -
            + port(): u16
            + host(): String
            + user(): String
            + password(): String
            + database(): String
        }
        class ConfigLoader{
            {static} + load() : Result<AppConfig,Error>
    }
}

BotBuilder - -> BotType
BotBuilder - -> AppConfig
BotBuilder - -> MessageBot
BotBuilder - -> TrackingStateServiceImpl
BotBuilder - -> MessageCommandFactory
BotBuilder - -> TelegramBot

MessageCommandFactory - -> MessageCommand

Chat - - -* Message

TelegramBot - -|> MessageBot
TelegramBot - -> TelegramCommandWrapper

MessageCommand - -> Chat
MessageCommand - -> CommandType
MessageCommand - -> CommandError

TrackingStateService - -> TrackingState
TrackingStateServiceImpl - -|> TrackingStateService
TrackingStateServiceImpl - -* DatabaseConfig

TrackingStateCommand - -|> MessageCommand
TrackingStateCommand - -> TrackingStateService
MessageBot - -> MessageCommand

AppConfig - -> DatabaseConfig
ConfigLoader - -> AppConfig



@enduml

PlantUML version 1.2018.01(Sun Jan 28 19:08:22 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_162-b12
Operating System: Linux
OS Version: 4.16.3-1-ARCH
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>